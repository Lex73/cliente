{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/alstanley/Documents/GitHub/cliente/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/alstanley/Documents/GitHub/cliente/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/alstanley/Documents/GitHub/cliente/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useReducer}from'react';import TareaContext from'./tareaContext';import TareaReducer from'./tareaReducer';import{TAREAS_PROYECTO,AGREGAR_TAREA,VALIDAR_TAREA,ELIMINAR_TAREA,TAREA_ACTUAL,ACTUALIZAR_TAREA,LIMPIAR_TAREA}from'../../types';import clienteAxios from'../../config/axios';import{jsx as _jsx}from\"react/jsx-runtime\";var TareaState=function TareaState(props){var initialState={tareasproyecto:[],errortarea:false,tareaseleccionada:null};// Crear dispatch y state\nvar _useReducer=useReducer(TareaReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// Crear las funciones\n// Obtener las tareas de un proyecto\nvar obtenerTareas=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(proyecto){var resultado;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return clienteAxios.get('/api/tareas',{params:{proyecto:proyecto}});case 3:resultado=_context.sent;// console.log(resultado);\ndispatch({type:TAREAS_PROYECTO,payload:resultado.data.tareas});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function obtenerTareas(_x){return _ref.apply(this,arguments);};}();// Agregar una tarea al proyecto seleccionado\nvar agregarTarea=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tarea){var resultado;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(tarea);_context2.prev=1;_context2.next=4;return clienteAxios.post('/api/tareas',tarea);case 4:resultado=_context2.sent;console.log(resultado);dispatch({type:AGREGAR_TAREA,payload:tarea});_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[1,9]]);}));return function agregarTarea(_x2){return _ref2.apply(this,arguments);};}();// Valida y muestra un error en caso de que sea necesario\nvar validarTarea=function validarTarea(){dispatch({type:VALIDAR_TAREA});};// Eliminar tarea por id\nvar eliminarTarea=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id,proyecto){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return clienteAxios.delete(\"/api/tareas/\".concat(id),{params:{proyecto:proyecto}});case 3:dispatch({type:ELIMINAR_TAREA,payload:id});_context3.next=9;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 9:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function eliminarTarea(_x3,_x4){return _ref3.apply(this,arguments);};}();// Edita o modifica una tarea\nvar actualizarTarea=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(tarea){var resultado;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return clienteAxios.put(\"/api/tareas/\".concat(tarea._id),tarea);case 3:resultado=_context4.sent;console.log(resultado);dispatch({type:ACTUALIZAR_TAREA,payload:resultado.data.tareaExiste});_context4.next=11;break;case 8:_context4.prev=8;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 11:case\"end\":return _context4.stop();}}},_callee4,null,[[0,8]]);}));return function actualizarTarea(_x5){return _ref4.apply(this,arguments);};}();// Extrae una tarea para edición\nvar guardarTareaActual=function guardarTareaActual(tarea){dispatch({type:TAREA_ACTUAL,payload:tarea});};// Elimina la tareaseleccionada\nvar limpiarTarea=function limpiarTarea(){dispatch({type:LIMPIAR_TAREA});};return/*#__PURE__*/_jsx(TareaContext.Provider,{value:{tareasproyecto:state.tareasproyecto,errortarea:state.errortarea,tareaseleccionada:state.tareaseleccionada,obtenerTareas:obtenerTareas,agregarTarea:agregarTarea,validarTarea:validarTarea,eliminarTarea:eliminarTarea,guardarTareaActual:guardarTareaActual,actualizarTarea:actualizarTarea,limpiarTarea:limpiarTarea},children:props.children});};export default TareaState;","map":{"version":3,"sources":["C:/Users/alstanley/Documents/GitHub/cliente/src/context/tareas/tareaState.js"],"names":["React","useReducer","TareaContext","TareaReducer","TAREAS_PROYECTO","AGREGAR_TAREA","VALIDAR_TAREA","ELIMINAR_TAREA","TAREA_ACTUAL","ACTUALIZAR_TAREA","LIMPIAR_TAREA","clienteAxios","TareaState","props","initialState","tareasproyecto","errortarea","tareaseleccionada","state","dispatch","obtenerTareas","proyecto","get","params","resultado","type","payload","data","tareas","console","log","agregarTarea","tarea","post","validarTarea","eliminarTarea","id","delete","actualizarTarea","put","_id","tareaExiste","guardarTareaActual","limpiarTarea","children"],"mappings":"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","sourcesContent":["import React, { useReducer } from 'react';\nimport TareaContext from './tareaContext';\nimport TareaReducer from './tareaReducer';\n\nimport { \n    TAREAS_PROYECTO,\n    AGREGAR_TAREA,\n    VALIDAR_TAREA,\n    ELIMINAR_TAREA,\n    TAREA_ACTUAL,\n    ACTUALIZAR_TAREA,\n    LIMPIAR_TAREA\n} from '../../types';\n\nimport clienteAxios from '../../config/axios';\n\nconst TareaState = props => {\n    const initialState = {\n        tareasproyecto: [],\n        errortarea: false,\n        tareaseleccionada: null\n    }\n\n    // Crear dispatch y state\n    const [state, dispatch] = useReducer(TareaReducer, initialState);\n\n    // Crear las funciones\n\n    // Obtener las tareas de un proyecto\n    const obtenerTareas = async proyecto => {\n\n        //console.log(proyecto);\n\n        try {\n            const resultado = await clienteAxios.get('/api/tareas', { params: { proyecto }});\n            // console.log(resultado);\n            dispatch({\n                type: TAREAS_PROYECTO,\n                payload: resultado.data.tareas\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    // Agregar una tarea al proyecto seleccionado\n    const agregarTarea = async tarea => {\n        console.log(tarea);\n        try {\n            const resultado = await clienteAxios.post('/api/tareas', tarea);\n            console.log(resultado);\n            dispatch({\n                type: AGREGAR_TAREA,\n                payload: tarea\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    // Valida y muestra un error en caso de que sea necesario\n    const validarTarea = () => {\n        dispatch({\n            type: VALIDAR_TAREA\n        })\n    }\n\n    // Eliminar tarea por id\n    const eliminarTarea = async (id, proyecto) => {\n        try {\n            await clienteAxios.delete(`/api/tareas/${id}`, { params: { proyecto }});\n            dispatch({\n                type: ELIMINAR_TAREA,\n                payload: id\n            })\n        } catch (error) {\n            console.log(error)\n        }\n    }\n\n    // Edita o modifica una tarea\n    const actualizarTarea = async tarea => {\n\n        try {\n            const resultado = await clienteAxios.put(`/api/tareas/${tarea._id}`, tarea);\n            console.log(resultado)\n            dispatch({\n                type: ACTUALIZAR_TAREA,\n                payload: resultado.data.tareaExiste\n            })\n        } catch (error) {\n            console.log(error);\n        }\n    }\n\n    // Extrae una tarea para edición\n    const guardarTareaActual = tarea => {\n        dispatch({\n            type: TAREA_ACTUAL,\n            payload: tarea\n        })\n    }\n\n    // Elimina la tareaseleccionada\n    const limpiarTarea = () => {\n        dispatch({\n            type: LIMPIAR_TAREA\n        })\n    }\n\n    return (\n        <TareaContext.Provider\n            value={{\n                tareasproyecto : state.tareasproyecto,\n                errortarea: state.errortarea,\n                tareaseleccionada: state.tareaseleccionada,\n                obtenerTareas,\n                agregarTarea,\n                validarTarea,\n                eliminarTarea,\n                guardarTareaActual,\n                actualizarTarea,\n                limpiarTarea\n            }}\n        >\n            {props.children}\n        </TareaContext.Provider>\n    )\n}\n\nexport default TareaState;"]},"metadata":{},"sourceType":"module"}